<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scalaye=1" name="viewport">
    <meta charset="UTF-8">

<!----Sentry error reporting script to report errors to the console NEEDS TO INITALIZE BEFORE EACH SCRIPT --->
<script src="https://browser.sentry-cdn.com/5.20.1/bundle.min.js" integrity="sha384-O8HdAJg1h8RARFowXd2J/r5fIWuinSBtjhwQoPesfVILeXzGpJxvyY/77OaPPXUo" crossorigin="anonymous">
</script>
<!----This function initalizes sentry---->
	<script>
        Sentry.init({ dsn: 'https://fdbd4fd456cd4b5da56178599e750894@o428671.ingest.sentry.io/5374312' });
        </script>

    <script>
     //Goto script moved to index.js
    </script>
    <title>Payables by Tulsi</title>
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" id="bootstrap-css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css" rel="stylesheet">

    <link crossorigin="anonymous" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
        integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lato|Poppins|Roboto|Roboto+Mono|Rubik|Work+Sans&display=swap"
        rel="stylesheet" />
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9.17.1/dist/sweetalert2.all.min.js"></script>
        <script src="js/swalUtility.js"></script>
        <style>
            .swal2-close{
                margin-top:1px !important;
            }
            .swal2-checkbox{
                display: none !important;
            }
        </style>
    <link href="css/style.css" rel="stylesheet">
    <link href="css/videostyle.css" rel="stylesheet">
    <link href="css/select2.css" rel="stylesheet">
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <style>
        label {
            display: flex !important;
        }
    
        .select2-container--open .select2-dropdown--below {
            width: 345px;
        }
    
        .select2-selection.select2-selection--multiple {
            width: 286px;
            max-height: 280px !important;
            height: 66px;
            background: #fcfcfc;
            border: 1px solid #3333;
        }
    
        .select2-container--default .select2-selection--multiple .select2-selection__choice {
            background-color: #ffffff;
            border: 1px solid #aaa;
            border-radius: 4px;
            display: inline-block;
            margin-left: 5px;
            margin-top: 5px;
            padding: 4px;
        }
    
        .dropbtn {
            background-color: #ffffff;
            color: white;
            padding: 16px;
            font-size: 16px;
            border: none;
            cursor: pointer;
        }
    
        .dropdown {
            position: relative;
            display: inline-block;
        }
    
        .dropdown-content {
	    display: none;
	    position: absolute;
	    right: 0;
	    background-color: #ffffff;
	    min-width: 147px;
	    box-shadow: 1px 8px 16px 0px rgba(179, 179, 179, 0.2);
	    z-index: 1;
	    border-bottom-left-radius: 5px;
	    border-bottom-right-radius: 5px;
	    margin: 4%;
	    margin-top: -2%;
	    border-radius: 6px;
        }
    
        .dropdown-content a {
            color: #737373;
            padding: 17px 16px;
            text-decoration: none;
            display: block;
            border-bottom: 1px solid #d4d4d499;
            font-family: lato;
            font-size: 15px;
            text-align: center;
        }
    
        .dropdown-content a:hover {
            background-color: #f1f1f1;
        }
    
        .dropdown:hover .dropdown-content {
            display: block;
            width: 242px;
        }
    
        .dropdown:hover .dropbtn {
            text-align: center;
        }

    </style>
<script type="text/javascript">
  window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src="https://cdn.heapanalytics.com/js/heap-"+e+".js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(r,a);for(var n=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","resetIdentity","removeEventProperty","setEventProperties","track","unsetEventProperty"],o=0;o<p.length;o++)heap[p[o]]=n(p[o])};
  heap.load("3339905728");
</script>
</head>



<body>
        <div id="loading">
        <img id="loading-image" src="img/axiloader.gif" alt="Loading..." />
	</div>

    <!-- video modal -->
    <section class="video-modal">

        <!-- Modal Content Wrapper -->
        <div id="video-modal-content" class="video-modal-content">

            <!-- iframe -->
            <iframe id="youtube" width="100%" height="100%" frameborder="0" allow="autoplay" allowfullscreen
                src=></iframe>

            <a href="#" class="close-video-modal">
                <!-- X close video icon -->
                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0"
                    y="0" viewBox="0 0 32 32" style="enable-background:new 0 0 32 32;" xml:space="preserve" width="24"
                    height="24">

                    <g id="icon-x-close">
                        <path fill="#ffffff"
                            d="M30.3448276,31.4576271 C29.9059965,31.4572473 29.4852797,31.2855701 29.1751724,30.980339 L0.485517241,2.77694915 C-0.122171278,2.13584324 -0.104240278,1.13679247 0.52607603,0.517159487 C1.15639234,-0.102473494 2.17266813,-0.120100579 2.82482759,0.477288136 L31.5144828,28.680678 C31.9872448,29.1460053 32.1285698,29.8453523 31.8726333,30.4529866 C31.6166968,31.0606209 31.0138299,31.4570487 30.3448276,31.4576271 Z"
                            id="Shape"></path>
                        <path fill="#ffffff"
                            d="M1.65517241,31.4576271 C0.986170142,31.4570487 0.383303157,31.0606209 0.127366673,30.4529866 C-0.12856981,29.8453523 0.0127551942,29.1460053 0.485517241,28.680678 L29.1751724,0.477288136 C29.8273319,-0.120100579 30.8436077,-0.102473494 31.473924,0.517159487 C32.1042403,1.13679247 32.1221713,2.13584324 31.5144828,2.77694915 L2.82482759,30.980339 C2.51472031,31.2855701 2.09400353,31.4572473 1.65517241,31.4576271 Z"
                            id="Shape"></path>
                    </g>

                </svg>
            </a>

        </div><!-- end modal content wrapper -->


        <!-- clickable overlay element -->
        <div class="overlay"></div>


    </section>
    <!-- end video modal -->


    <nav class="navbar navbar-default navbar-fixed-top" role="navigation"
        style="padding: 0 15px;background-color: #343434; z-index: 1;">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse"
                type="button">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#"><img src="img/logodark.png" style="width: 36%;padding: 4px;" /></a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <!--            <li class="active"><a href="#">Link</a></li>-->
                <!--            <li><a href="#">Link</a></li>-->
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li id="videolinkDiv">
                    <a href="https://www.youtube.com/watch?v=Ahglrb_z7wQ" data-youtube-id="Ahglrb_z7wQ"
                        class=" button primary js-trigger-video-modal">
                        <i class="fas fa-parking"></i> &nbsp; 5 mins to master payables
                    </a>
                </li>
                <li id="auditLogsLink">
                    <a onclick="GoToAuditLogs();" target="_self">
                        <i class="fas fa-history" style="font-size: 18px;"></i> &nbsp; Audit Logs
                    </a>
                </li>

                <li>
                    <a href="mailto:tulsihelpdesk@gmail.com" target="_blank">
                        Feedback</a>
                </li>

                <li class="dropdown">
                    <a class="dropbtn"><span id="userimage"><img src="img/Profilepic.webp"
                                style="max-height: 40px; border-radius: 50%;" /> &nbsp; </span><span id="username">Not
                            LoggedIn</span> &nbsp; <i class="fas fa-angle-down"></i></a>
                    <div class="dropdown-content">
                        <a onclick="GotoPricing();"><span id="signout">Manage Subscription</span></a>
                        <a onclick="GotoCollaborators()" target="_self">Teams & Permissions</a>
	                    <a onclick="GoToSettings()" target="_self">Settings</a>
                        <a href="http://www.google.com" target="_blank">Helpdesk</a>
                        <a href="#" style="background: #f88da5; color: #fff; font-weight: 700;
    border-bottom-left-radius: 6px;
    border-bottom-right-radius: 6px;"
                            onclick="SignOutFirebase();"><span id="signout">Logout</span> &nbsp; <i
                                class="fas fa-sign-out-alt"></i></a>
                    </div>
                </li>
            </ul>
        </div><!-- /.navbar-collapse -->
    </nav>
    <div style="border-right: 1px solid #a4a4a4;margin-top: 50px;">
        <div
            style="padding: 2% 2% 2% 2%; border-bottom: 1px solid #e9e9e9; background: linear-gradient(176deg, #f9f9f9, transparent);">
            <div style="display: inline-flex; width:100%; margin-top: 1%;">
                <h3 style="width: 100%;margin: 0;line-height: 2;font-weight: 600;font-family: lato;color: #999;">
                    Payment Accounts
                    <p style="
    font-size: 13px;
    font-weight: 100;
">These below are your payment sources to manage payables &amp; recieveables from &amp; in each source</p>
                </h3>
                <div
                    style="color: #607D8B; place-self: center; min-width: 282px; text-align: center; font-weight: 300; font-size: 21px;text-align: right;">
                    <i class="far fa-calendar-alt" style="color: #e5e5e5; font-size: 63px;"></i> &nbsp; <a
                        style="display: inline-block; text-align: left;color: #999;"><b id="today"
                            style="font-weight:900;">-----</b><br>
                        <b id="date">------</b></a>
                </div>
            </div>

            <h5 class="message_notify" id="quickHackMessage" style="margin-left: 0;"> <a><i class="fas fa-info-circle"></i> &nbsp;
                    QUICK HACK:</a>Keep an eye on all account to get an exact idea when your business will go out of cashflow, Shift transactions between banks to manage it accordingly.<b href="#">know
                    more tips</b>
            </h5>
            <div class="tab" id="tabs-accounts">
                <button class="tablinks" data-accid="defaultOpen" id="defaultOpen" onclick="openTab(event, 'All')"
                    style="background: repeating-linear-gradient(379deg, #fff7da, #ffffff 155px); border-color: #ffcb1a;">
                    <i class="fas fa-university" style="background: #ffd54a;"></i><br><b style="color: #f9c724;">Total
                        of All Holdings</b>
                    <input disabled placeholder="---------" style="text-align: center;border: none;font-weight: 700;"
                        type="number" />
                </button>
                <!--ACCOUNT TABS APPEND HERE-->
                <button class="tablinks" data-accid="add-account" id="add-account" onclick="$(this).addClass('active');"
                    style="filter: none;opacity: 1;color: #15a180;">
                    <i class="fas fa-plus"></i>
                    <b>Add new source</b>
                    <input id="account_title" placeholder="Bank name" type="text" />
                    <a onclick="addAccountActual()" placeholder="add" type="button" class="addbank" style="background: #47c3a7;">
                        Add Bank Account
                    </a>
                </button>
            </div>
        </div>
    </div>
    <div class="tabcontent" id="All">
        <ul class="timeline balance_in_account_bar">
            <li class="timelinePart">
                <p class="timeline-date" style="background: linear-gradient(157deg, #efefef, #e0dede);
    color: #363636;
    border-top-left-radius: 34px;
    border-bottom-left-radius: 30px;
    text-align: center;
    padding: 6px 0px;
    margin-top: 13px;
    font-weight: 700;
    font-size: 16px;font-family: lato;">
                    FUNCTIONS
                </p>
                <div class="timeline-content" style="display: flex;padding-bottom: 2%; padding-top: 1%;">
                    <div style="display: grid;width: 25%; margin-right: 1%;">
                        <label>Search &nbsp; <i class="fas fa-search"></i></label>
                        <input style="width: 100%; height: auto; border-radius: 38px;padding: 8px;" class="balance_input" onkeyup="advance_search_record($(this).val())"
                            placeholder="Advance Search data within all transactions" type="text" />
                    </div>
                    <div style="display: grid; width: 34%;">
                        <label><i class="fas fa-signature"></i> &nbsp; Approval Filters ~ Show & Hide</label>
                        <b>
                            <a class="signstatus" style="color: #ffffff; background: #56bea6;"
                                title="Transactions that are signed and approved for payment">
                                <input class="1" name="ApprovalFilters" onchange="filterRecordsSigned()"
                                    style="width: 27px; height: 20px; vertical-align: text-bottom;" type="checkbox"
                                    value="Approved">&nbsp; Approved &nbsp; <i class="fas fa-check"></i>
                            </a>
                            <a class="signstatus" style="color: #616161; background: #e4e4e4;"
                                title="Transactions that are pending and yet to be approved or rejected">
                                <input class="1" name="ApprovalFilters" onchange="filterRecordsSigned()"
                                    style="width: 27px; height: 20px; vertical-align: text-bottom;" type="checkbox"
                                    value="Pending">&nbsp; Pending &nbsp; <b style="padding-left: 8px; border-left: 2px solid #c1c1c1;" id="pendingTCount">0</b>
                            </a>
                            <a class="signstatus" style="color: #ffffff; background: #ff88a4;"
                                title="Transactions that have been denied.">
                                <input class="1" name="ApprovalFilters" onchange="filterRecordsSigned()"
                                    style="width: 27px; height: 20px; vertical-align: text-bottom;" type="checkbox"
                                    value="Denied">&nbsp; Denied &nbsp; <i class="fas fa-times"></i>
                            </a>
                        </b>

                    </div>

                    <div style="display: grid; width: 44%;">
                        <label><i class="far fa-credit-card"></i> &nbsp; Payment Filters ~ Show & Hide</label>
                        <b>
                            <a class="paymentstatus" style="color: #19c9a0; background: #ccfff3;"
                                title="Cheques paid and are now deducted from your account">
                                <input class="1 clearchk" name="clearPaymentCheckbox" onchange="filterRecords()"
                                    style="width: 27px; height: 20px; vertical-align: text-bottom;" type="checkbox"
                                    checked value="Cleared"> &nbsp; Cleared &nbsp; <i class="fas fa-check"></i>
                            </a>
                            <a class="paymentstatus" style="color: #f46083; background: #ffeaef;"
                                title="Cheques that is given out but arnt yet cleared from the bank.">
                                <input class="1" name="clearPaymentCheckbox" onchange="filterRecords()"
                                    style="width: 27px; height: 20px; vertical-align: text-bottom;" type="checkbox"
                                    value="Un Clear"> &nbsp; Un-Clear &nbsp; <i class="fas fa-exclamation-circle"></i>
                            </a>
                            <a class="paymentstatus" style="color: #fac200; background: #fffae8;"
                                title="Cheques that are yet to be paid">
                                <input class="1" name="clearPaymentCheckbox" onchange="filterRecords()"
                                    style="width: 27px; height: 20px; vertical-align: text-bottom;" type="checkbox"
                                    value="Due">&nbsp; Due &nbsp; <i class="fas fa-bell"></i>
                            </a>
                            <a class="paymentstatus"  style="color: #616161;background: #e4e4e4;"
                                title="Cheques that have been dishonoured or failed to clear">
                                <input class="1" name="clearPaymentCheckbox" onchange="filterRecords()"
                                    style="width: 27px; height: 20px; vertical-align: text-bottom;" type="checkbox"
                                    value="Bounced">&nbsp; Bounced &nbsp; <i class="fas fa-times"></i>
                            </a>
                        </b>
                    </div>




<!---This needs to be in settings 
                    <div style="display: grid; width: 22%;">
                        <label>Payment Collection Days</label>
                        <select class="select selectpicker collectiondayselect collectionDays" multiple
                            onchange="filterbyCollectionDay($(this).val());" style="float: right; margin: -7px 11px;">
                            <option>Mon</option>
                            <option>Tue</option>
                            <option>Wed</option>
                            <option>Thu</option>
                            <option>Fri</option>
                            <option>Sat</option>
                            <option>Sun</option>
                        </select>
                    </div> ------->


                    <!------Export function to be shifted to a different page
                    <div style="display: flow-root;margin-left: 1%;">
                        <label>Export</label>
                        <select style="height: 66px; border-radius: 4px; border: 1px solid #3333; background: #fcfcfc;">
                            <option selected >Select format</option>
                            <option onclick="exportToExcel_datapopulate();" id="export_to_excel_btn">Export as Quickbooks</option>
                            <option onclick="exportToExcel_datapopulate();" id="export_to_excel_btn">Export for Xero </option>
                            <option onclick="exportToExcel_datapopulate();" id="export_to_excel_btn">Export for Tulsi </option>
                            <option onclick="exportToExcel_datapopulate();" id="export_to_excel_btn">Export as Sage</option>
                            <option onclick="exportToExcel_datapopulate();" id="export_to_excel_btn">Export as csv</option>
                            <option onclick="exportToExcel_datapopulate();" id="export_to_excel_btn">Export as excel</option>
                        </select>
                    </div>
                   END OF the export selection by here------>
                </div>
            </li>
        </ul>

        <ul class="timeline" id="all-transactions">
            <li class="timelinePart" id="add-entry-all">
                <p class="timeline-date" style="background: linear-gradient(157deg, #393939, #343434);
    color: #fff;
    border-top-left-radius: 34px;
    border-bottom-left-radius: 30px;
    text-align: center;
    padding: 6px 0px;
    margin-top: 13px;
    font-weight: 700;
    font-size: 16px;font-family: lato;">
                    + ADD NEW
                </p>
                <div class="timeline-content">
                    <div class="responsive-table">
                        <table class="nowTable" id="t_draggable1">
                            <thead>
                                <tr class="ui-state-default">
                                    <th>Date</th>
                                    <th style="width: 10%;">Payment mode (Optional)</th>
                                    <th>Party Name</th>
                                    <th>Transaction Type</th>
                                    <th style="width: 12%;">Payment Source </th>
                                    <th style="width: 10%;">Payment Status</th>
                                    <th>Amount</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody class="t_sortable">
                                <tr id="all-transaction-fields">
                                    <td><input id="transaction_date" class="mandatory-field" placeholder="DD/MM/YYYY"
                                            type="date"></td>
                                    <td><input id="cheque_no" placeholder="cheque, NEFT, RTGS" type="text"></td>
                                    <td><input id="payee" placeholder="Name of Buyer or Supplier"
                                            class="mandatory-field" type="text"></td>
                                    <td>
                                        <select class="form-control" id="mode" name="">
                                             <optgroup label="Company Operations">
                                            <option class="green-text" value="Buyer">Buyer Addition</option>
                                            <option class="red-text" value="Supplier">Supplier Deduction</option>
                                              </optgroup> 
                                             <optgroup label="Company Expenses ">
                                            <option class="red-text" value="">Uncategorised</option>
                                            <option class="red-text" value="">Advertising</option>
                                            <option class="red-text" value="">Stationery</option>
                                            <option class="red-text" value="">Benifits</option>
                                            <option class="red-text" value="">Car</option>
                                            <option class="red-text" value="">Dinner</option>
                                            <option class="red-text" value="">Home Office</option>
                                            </optgroup>
                                        </select>
                                    </td>
                                    <td>
                                        <input id="transaction_id" type="hidden" value="">
                                        <select class="form-control" id="account-list">
                                            <option disabled selected>Paying from ?</option>
                                        </select>
                                    </td>
                                    <td>
                                        <select class="form-control" id="status" name="">
                                            <option disabled selected>Is it done?</option>
                                            <option class="red-text" value="Un Clear">Un-Clear</option>
                                            <option class="orange-text" value="Due">Due</option>
                                            <option class="green-text" value="Cleared">Cleared</option>
                                            <option class="black-text" value="Bounced">Bounced</option>
                                        </select>
                                    </td>
                                    <td class="balance">
                                        <input id="withdrawal" placeholder="enter amount" class="mandatory-field"
                                            type="number">
                                    </td>
                                    <td>
                                        <button id="add-transaction" onclick="addupdatetransaction(false);"
                                            type="button" style="background: #f0f9f7;border: 2px solid #71c8b4;color: #71c8b4;">
                                            <i class="fa fa-plus" style="opacity: 1;"> &nbsp; Add</i>
                                            <!--                                        Add-->
                                        </button>
                                        <button class="btn btn-info" id="edit-transaction"
                                            onclick="addupdatetransaction(true);" style="display: none;background: #f0f9f7;border: 2px solid #71c8b4;color: #71c8b4;" type="button">
                                            <i class="fa fa-upload" style="opacity: 1;"> &nbsp; Update</i>
                                            <!--                                        Update-->
                                        </button>
                                        <button id="clear-transaction" onclick="clearTransactionFields();" type="button"
                                            style="background: #fef4f6; color: #f8a0b5; border: 2px solid #f8a0b5;">
                                            <i class="fas fa-minus-circle" style="opacity: 1;"> &nbsp; Clear</i>
                                            <!--                                        Clear-->
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </li>
            <!--TRANSACTION RECORDS HERE-->
        </ul>
        <span id="load-more" style="float: right; display: none; margin:20px;color:blue;cursor: pointer;"
            onclick="LoadMore();">Load more</span>
    </div>

<!-----Export table heads and everything to be moved to a different screen
    <div id="export_to_excel" style="display:none">
        <table id="tblDatatoexport">
            <tr>
                <th>Date</th>
                <th>Check #</th>
                <th>Party Name</th>
                <th>Transaction Type</th>
                <th>Payment Source</th>
                <th>Payment Status</th>
                <th>Amount</th>
            </tr>
        </table>
    </div>
END OF COMMENT for export table function ----->

    <input style="display: none;" id="customerid">
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js'></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-app.js"></script>

    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-firestore.js"></script>

    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js'></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-app.js"></script>

    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-storage.js"></script>
    <script defer src="js/mFirebase.js"></script>
    <script src="js/index.js"></script>
    <script src="js/select2.js"></script>
    <script src="js/videoscript.js"></script>
    <div id="transaction-notes-modal" class="modal">
        <div class="modal-content" 
    style="background: #fff3a4;
    font-weight: 700;
    padding: 1% 1%;
    width: 500px;
    height: 614px;
    box-shadow: 9px 10px 20px 10px #696969;
    margin: 3% auto;
    border: none;
    border-radius: 0;">
            <span class="modal-close-btn" onclick="closeNotesModal();">&times;</span>
            <div class="modal-body">
                <div>
                    <h3 style="font-family: poppins-regular;">Notes for Transaction ID #<span id="notes_transaction_id"></span></h3>
                    <br/>
                    <div style="display: grid;">
                        <span>Other details about the transaction:</span>
                               <textarea style="background: #ffffff5c; border:0px solid #ffed71;line-height: 24px; width: 100%;"  placeholder="add payment notes and attachments such as bank account details, payment invoices, etc;" id="notes" type="textarea" ></textarea>
                     </div>
                <br>
                <div style="display: flex;">
                    <img id="attachment_thumbnail" src="img/Placeholder.png" style="height: 105px; width: 115px; display: inline; border-radius: 3px; border: 2px solid rgb(243, 219, 67);"/>
                    <input type="file" style="width: 105px; height: 104px; background: #efefef; border: 2px dashed #615e5e; padding-top: 36px;" id="transaction_attachment"></input>                
                </div>
                <br>
                </div>
                <button style="width: 100%; background: #615e5e; border: none; padding: 4%;" onclick="AddNotesToTransaction();">Save transaction Notes</button>
                    <br>
                <br>
                
                <div style="display: none;">
                    <table class="saved_table">
                        <thead>
                            <tr>
                                <th colspan="3">Remove this table, notes to update and delete in the same text box</th>
                            </tr>
                            <tr>
                                <th style="text-align: left;">Notes</th>
                                <th style="text-align: left;width: 15%;">Attachment</th>
                                <th style="text-align: left;width: 9%;">Action</th>
                            </tr>
                        </thead>
                        <tbody id="transaction_notes_table_tbody">
                            <!-- Firebase data -->
    
                        </tbody>
                        <tr id="loading_rows_tr" class="loading_rows">
                            <td colspan="3"><img src="img/loader.svg" /> &nbsp; Loading results...</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <style>
            .message-success {
                color: #00bb32;
            }

            .message-error {
                color: #860404;
            }

            /* The Modal (background) */
            .modal {
                display: none;
                /* Hidden by default */
                position: fixed;
                /* Stay in place */
                z-index: 1;
                /* Sit on top */
                left: 0;
                width: 100%;
                /* Full width */
                height: 100%;
                /* Full height */
                overflow: auto;
                /* Enable scroll if needed */
                background-color: rgb(0, 0, 0);
                /* Fallback color */
                background-color: rgba(0, 0, 0, 0.4);
                /* Black w/ opacity */
            }
	
            .blue-text {
		    color: #3b3be0;
		    background: #ededff;
            }

            .modal-body {
                clear: both;
                margin-top: 10px;
                overflow: auto;
            }

            /* Modal Content/Box */
            .modal-content {
                background-color: #fefefe;
                margin: 5% auto;
                padding: 20px;
                border: 1px solid #888;
                width: 45%;
                height: 75%;
            }

            .modal-close-btn {
	    width: 36px;
	    height: 36px;
	    background: #f5e99f;
	    color: #333333;
	    border-radius: 50%;
	    text-align: -webkit-center;
	    transform: scale(1.5);
            }

            .modal-close-btn:hover,
            .modal-close-btn:focus {
                color: black;
                font-weight: bold;
                text-decoration: none;
                cursor: pointer;
            }
        </style>
    </div>

<!----OPEN MODAL to Approve or Reject the transaction for only Owner (for all teams and transactions) & Group Admin (for there own team only)----->

    <div id="transaction-approve_deny_modal" class="modal1">
        <div class="modal-content" style="text-align: center;height: fit-content;max-width: 455px;">
            <span class="modal-close-btn" onclick="closeapproveDenyModal();"  style="background: #f5f5f5; color: #333; width: 32px; height: 33px; box-shadow: none; margin: 2%; line-height: 1;">&times;</span>
            <div class="modal-body">

                     <i class="far fa-thumbs-up"  style="font-size: 72px; color: #949494; background: #f9f9f9; padding: 6%; border-radius: 50%;"></i>

                    <h3 style="margin-bottom: 10px;">Final Approval</h3>
		    <p>Please confirm this action is for transaction for Party : John Doe, Dated: 12/02/20, Amounted: 4360</p>  
                    <br><br>                 
                    <button id="btn_approve" style="width: 130px;border:none;background:#21b997;"
                    onclick="SetSignedOrDenied('Approved');"><i class="far fa-thumbs-up"></i> &nbsp; Approve</button>
                    <button id="btn_denied" style="width: 130px;background:#f76b60;border:none;"
                    onclick="SetSignedOrDenied('Denied');"><i class="far fa-thumbs-down"></i> &nbsp; Deny</button>
            </div>
        </div>

<!---MOVE CSS TO STYLE SHEET ---->
        <style>
            .message-success {
                color: #00bb32;
            }

            .message-error {
                color: #860404;
            }

            /* The Modal (background) */
            .modal1 {
                display: none;
                /* Hidden by default */
                position: fixed;
                /* Stay in place */
                z-index: 1;
                /* Sit on top */
                left: 0;
                top: 0;
                width: 100%;
                /* Full width */
                height: 100%;
                /* Full height */
                overflow: auto;
                /* Enable scroll if needed */
                background-color: rgb(0, 0, 0);
                /* Fallback color */
                background-color: rgba(0, 0, 0, 0.4);
                /* Black w/ opacity */
            }

            .modal-body {
                clear: both;
                margin-top: 10px;
                overflow: auto;
            }

            /* Modal Content/Box */
            .modal-content {
                background-color: #fefefe;
                margin: 5% auto;
                padding: 20px;
                border: 1px solid #888;
                width: 45%;
                height: 75%;
            }

            .modal-close-btn {
	    font-size: 20px;
	    padding: 5px;
	    right: 15px;
	    width: 32px;
	    height: 33px;
	    box-shadow: none;
	    margin: 0%;
	    float: right;
            }

            .modal-close-btn:hover,
            .modal-close-btn:focus {
                color: black;
                font-weight: bold;
                text-decoration: none;
                cursor: pointer;
            }
        </style>
    </div>

<!----MOVE THE SCRIPTS TO INDEX.JS ------>

    <script>
        function closeapproveDenyModal(){
            $("#transaction-approve_deny_modal").hide();
        }
        function closeNotesModal() {
            $("#transaction-notes-modal").hide();
        }

        function openNotesModal() {
            $("#transaction-notes-modal").show();
        }
       
        $(document).ready(function () {
	            setTimeout(function () {
                $('#clearchk').prop("checked", true).trigger("change");
                var field = document.querySelector('#transaction_date');
                var date = new Date();
                // Set the date
                field.value = date.getFullYear().toString() + '-' + (date.getMonth() + 1).toString().padStart(2, 0) +
                    '-' + date.getDate().toString().padStart(2, 0);
            }, 5000);
	            $("body").hide();
            $(".collectiondayselect").select2();
            getFirebaseConfig().then(function () {
                firebase.auth().onAuthStateChanged(function (user) {
                    if (user) {
                        UserObject = user;
                        if (!UserObject.emailVerified) {
                            location.href = url + "/signin";
                        }
                        $('#userimage').find('img').attr('src', (UserObject.photoURL ? UserObject.photoURL : 'img/Profilepic.webp'));
                        $('#username').text((UserObject.displayName ? UserObject.displayName : UserObject.email.split('@')[0]));

                        tblUsers = db.collection("tbl_users");
                        tblUsers.where("UserID", "==", localStorage.getItem("userid")).get().then(function (querySnapshot) {
                            if (querySnapshot.docs.length > 0) {
                                tblStripeCustomers = db.collection("tbl_stripecustomers");
                                tblStripeCustomers.where("UserID", "==", localStorage.getItem("userid")).where("CustomerEmail", "==", localStorage.getItem("owner_email")).get().then(function (querySnapshotNew) {
                                    if (querySnapshotNew.docs.length > 0) {
                                        $('#customerid').val(querySnapshotNew.docs[0].data().customerid);
                                        getCustomerSubscriptions().then(function (response) {

                                            if (response.length > 0) {
                                                if (response[0].status == "active" || response[0].status == "trialing") {
	                                                getUserExpenseTypes();
                                                } else {
                                                    location.href = url + "/pricing";
                                                }
                                            }

                                        });
                                    }
                                });

                            } else {
                                tblUsers.add({
                                    UserID: localStorage.getItem("userid"),
                                    PaymentVerified: false,
                                    AmountPaid: 0,
                                    TransactionID: "",
                                    ExpiryDate: "",
                                    collectionDays: ""
                                }).then(function (docRef) {
                                    location.href = url + "/pricing";
                                }).catch(function (error) {
                                    console.error("Error adding document: ", error);
                                });
                            }
                        }).catch(function (error) {
                            console.error("Error adding document: ", error);
                        });
                        getAccountsAll();
                        $("body").show();
                    } else {
                        location.href = url + "/signin";
                    }
                });
                BalanceInputField();
                $('.selectpicker').select2({
                    placeholder: 'Select Collection day'
                });
            });
        });

	        function getUserExpenseTypes() {
            console.log("appending expense types");
            $("#mode").html("");
            $("#mode").append("<option selected>Who're they ?</option>");
            $("#mode").append("<option class='green-text' value='Buyer'>Buyer</option>");
            $("#mode").append("<option class='red-text' value='Supplier'>Supplier</option>");
            db.collection('tbl_users').where('UserID', '==', localStorage.getItem("userid")).get()
                .then(querySnapshot => {
                    if(querySnapshot.docs[0].data().ExpensesList){
                        querySnapshot.docs[0].data().ExpensesList.forEach(val => {
                        $("#mode").append("<option class='blue-text'  value='" + val + "'>" + val + "</option>");
                    })
                    }
                });
             }

        function SignOutFirebase() {
            firebase.auth().signOut().then(function () {
                location.href = url + "/signin";
            }).catch(function (error) {
                // An error happened.
            });
        }
    </script>
</body>

<script>
    $(window).load(function () {
        $('#loading').hide();
    });
    var ViewOnly = false;
	    $(document).ready(function () {
        if (localStorage.getItem("access") == "Owner") {
            ViewOnly = true;
            //  location.href=url+"/index";
        }
    });
</script>


</html>
